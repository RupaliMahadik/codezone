<!DOCTYPE html>
<html>

<head>
    <title>my app</title>
</head>
<style>
    * {
        box-sizing: border-box;
    }

    #myInput {
       
       
        width: 100%;
        font-size: 16px;
        padding: 12px 20px 12px 40px;
        border: 1px solid #ddd;
        margin-bottom: 12px;
    }

    #myTable {
        border-collapse: collapse;
        width: 100%;
        border: 1px solid #ddd;
        font-size: 18px;
    }

    #myTable th,
    #myTable td {
        text-align: left;
        padding: 12px;
    }

    #myTable tr {
        border-bottom: 1px solid #ddd;
    }

    #myTable tr.header,
    #myTable tr:hover {
        background-color: #f1f1f1;
    }
</style>

<body>
    <h2>Employee Search</h2>
    <form action="/action_page.php" method="get">
        <input type="text" id="myInput" onkeyup="myFunction()" placeholder="Search for names.." title="Type in a name">
        <input type="checkbox" id="xemployee"> Include Terminated Employee
        <input type="checkbox" name="allrecord"> Limit results
        <br>
        <table id="myTable">
            <thead>
                <tr>
                        <!-- <th title="Field #1">ID</th> -->
                    <th title="Field #2">photo</th>
                    <th title="Field #3">Name</th>
                    <th title="Field #4">telephone no</th>
                    <th title="Field #5">status</th>

                </tr>
            </thead>
            <tbody class="employee_record">
              
            </tbody>

            
        </table>


</body>
<script>
    // var search = document.getElementById("myInput");
    // search.style.color="red";
    // search.style.fontSize= '12px';

//here we are calling  function  getJson for calling json url
    function getJson(url,callback){
        var xhttp= new XMLHttpRequest();   // defining varibale XMLHttpRequest object can be used to exchange data with a web server 
        xhttp.onreadystatechange=function(){
            if(this.readyState==4 && this.status==200){
                var json = JSON.parse(this.responseText);
                callback(json);
            }
    //         {
    //         document.getElementById("employee_record").innerHTML = this.responseText;
    // }
        };
        xhttp.open("GET",url,true);
        xhttp.send();
    }


//recived data and appending into table
 function employeesReceived (employeeData) {
        // console.log(employeeData);
           //var tableBody is variable where we are defining javascript method to select  from employee_record
        var tableBody = document.querySelector('.employee_record');

        for(var i = 0; i < employeeData.length; i++) {
            
            var employeeRecord =  renderemployee(employeeData[i]);

            tableBody.appendChild(employeeRecord);
        }
    }

    getJson('employee.json', employeesReceived);

    function renderemployee(employee){
        var row = document.createElement("tr");
        var idcolumn=document.createElement("td");
        var photo=document.createElement("td");
        var name=document.createElement("td");
        var phone=document.createElement("td");
        var status=document.createElement("td");
        
       
			
     
        row.setAttribute('id', employee.id);
     
        // row.appendChild(idcolumn);
        row.appendChild(photo);
        row.appendChild(name);
        row.appendChild(phone);
        row.appendChild(status);

        idcolumn.innerHTML=employee.id;
        // name.innerHTML = employee.lastName +',' +employee.firstName;
        name.innerHTML = employeeName(employee.lastName, employee.firstName);
        //phone.innerHTML=employee.telephone;
        phone.innerHTML=employeePhone(employee.telephone);

        photo.innerHTML = employeeImage(employee.lastName, employee.firstName);
        // TODO - fill in table cells
        // status.innerHTML= employeeStatus(employee.employed);
        status.appendChild(employeeStatus(employee.employed));
        return row;

    }

    function employeeName(lastName, firstName){
        if (lastName) {
            return lastName + ', ' + firstName;
        } else {
            return firstName;
        }
    }

 function employeePhone(telephone){
   var areacode = telephone.substr(0,3);
   var localcode=telephone.substr(3,3);
   var localnumber=telephone.substr(6,4);
   //return areacode + localcode+localnumber;
   return "("+ areacode +") "+ localcode+"-"+localnumber;
 }

 function employeeImage(firstName,lastName){
     var firstInitial = firstName.substr(0, 1);
     var lastInitial = lastName.substr(0, 1);

     return '<img src="http://dummyimage.com/50x50/131217/A3B9C9&amp;text=' + firstInitial + lastInitial + '" title="' + employeeName(lastName, firstName) + '">';
 }

//  function employeeStatus(employed){
//      if (employed) {
//         return '<label><input type="checkbox" checked>Employeed</label>';
//      } else {
//         return '<label><input type="checkbox">Employeed</label>';
//      }
//  }

     function employeeStatus(employed){
        var labelElement = document.createElement('label');
        var inputElement = document.createElement('input');
        var labelText = document.createTextNode('Employed');

        if (employed) {
            inputElement.setAttribute('checked', true);
        }
        inputElement.setAttribute('type', 'checkbox');

        labelElement.appendChild(inputElement);
        labelElement.appendChild(labelText);

        return labelElement;
    }
   
</script>

</html>